# FastAPI URL Shortener

Этот проект — простой сервис сокращения ссылок (URL shortener), реализованный на FastAPI и aiosqlite (асинхронная работа с SQLite).  
Проект позволяет генерировать короткие ссылки для длинных URL, а также перенаправлять пользователей по коротким ссылкам на исходные адреса.

## Возможности

- Асинхронный HTTP API на FastAPI.
- Хранение данных в SQLite (через aiosqlite).
- Генерация коротких ссылок с помощью хеша SHA-256.
- Проверка на коллизии при генерации коротких ссылок.
- Перенаправление по короткой ссылке на исходный URL.

## Структура проекта

- `server.py` — основной файл приложения FastAPI (роуты, запуск/инициализация базы).
- `get_longUrl`, `add_url`, `get_hash` — функции для работы с базой и генерации хэша.
- `mydb.sqlite` — база данных (создается автоматически при запуске).

## Установка и запуск

1. Клонируйте репозиторий:
    ```sh
    git clone <repo-url>
    cd <repo-directory>
    ```
2. Соберите docker образ:
    ```sh
    docker build -t urlshortener:dev .
    ```
3. Запустите сервер:
    ```sh
    docker run --rm -p 8000:8000 --name urlshortener urlshortener:dev
    ```

## Использование

### 1. Сокращение ссылки

**POST** `/add`

**Тело запроса:**
```json
{
  "longUrl": "https://example.com/some/long/url"
}
```

**Ответ:**
```json
{
  "url": "/show?shortUrl=AbCdEfG"
}
```

### 2. Перенаправление

**GET** `/show?shortUrl=AbCdEfG`

Браузер будет перенаправлён на исходный длинный URL.

## Пример работы

1. Отправьте POST-запрос на `/add` с вашим длинным URL.
2. Получите короткую ссылку.
3. Перейдите по адресу `/show?shortUrl=<hash>`, чтобы попасть на ваш длинный URL.
